---
title: "Arquitectura del Proceso de Business Intelligence - Empresa Molinera"
---

flowchart TD
    %% Fuentes de Datos (CSV)
    subgraph FUENTES["ğŸ“ FUENTES DE DATOS"]
        CSV1["ğŸ“„ DATA_VENTAS_HARINA_FINAL.csv"]
        CSV2["ğŸ“„ DATA_INVENTARIO_HARINA_FINAL.csv"]
        CSV3["ğŸ“„ DATA_PRODUCCIÃ“N_HARINA.csv"]
        CSV4["ğŸ“„ DATA_DISTRIBUCION_HARINA_FINAL.csv"]
        CSV5["ğŸ“„ PRECIOS_POR_PRODUCTO.csv"]
    end

    %% Proceso ETL 1: CSV to Database
    subgraph ETL1["ğŸ”„ ETL FASE 1: CreaciÃ³n BD Operacional"]
        SCRIPT1["ğŸ create_db_molinera.py"]
        TRANS1["ğŸ”§ Transformaciones:<br/>â€¢ NormalizaciÃ³n de datos<br/>â€¢ CreaciÃ³n de FK/PK<br/>â€¢ ValidaciÃ³n de datos<br/>â€¢ CreaciÃ³n de Ã­ndices"]
    end

    %% Data Warehouse Operacional
    subgraph DW["ğŸ¢ DATA WAREHOUSE OPERACIONAL"]
        DB["ğŸ—„ï¸ empresa_molinera.db"]
        subgraph TABLAS["Tablas Principales"]
            T1["ğŸ“‹ PAISES (9 registros)"]
            T2["ğŸ“‹ PRODUCTOS (Ãºnicos)"]
            T3["ğŸ“‹ ALMACENES (3 registros)"]
            T4["ğŸ“‹ CLIENTES (por paÃ­s)"]
            T5["ğŸ“‹ VENTAS (transacciones)"]
            T6["ğŸ“‹ INVENTARIOS (movimientos)"]
            T7["ğŸ“‹ PRODUCCION (lotes)"]
            T8["ğŸ“‹ DISTRIBUCION (envÃ­os)"]
        end
    end

    %% Proceso ETL 2: Database to Datamarts
    subgraph ETL2["ğŸ”„ ETL FASE 2: CreaciÃ³n Datamarts"]
        SCRIPT2["ğŸ crear_datamarts.py"]
        TRANS2["ğŸ”§ Transformaciones:<br/>â€¢ Esquemas estrella<br/>â€¢ Dimensiones<br/>â€¢ Tablas de hechos<br/>â€¢ MÃ©tricas de negocio"]
    end

    %% Datamarts Especializados
    subgraph DATAMARTS["â­ DATAMARTS DIMENSIONALES"]

        subgraph DM1["ğŸ’° DATAMART VENTAS"]
            DM1_DB["ğŸ“Š datamart_ventas.db"]
            DM1_DIM["ğŸ”¹ Dimensiones:<br/>â€¢ DIM_TIEMPO<br/>â€¢ DIM_PRODUCTO<br/>â€¢ DIM_CLIENTE<br/>â€¢ DIM_GEOGRAFIA<br/>â€¢ DIM_CANAL<br/>â€¢ DIM_TRANSPORTE"]
            DM1_FACT["ğŸ“ˆ FACT_VENTAS<br/>MÃ©tricas: ingresos, mÃ¡rgenes,<br/>comisiones, descuentos"]
        end

        subgraph DM2["ğŸ“¦ DATAMART INVENTARIOS"]
            DM2_DB["ğŸ“Š datamart_inventarios.db"]
            DM2_DIM["ğŸ”¹ Dimensiones:<br/>â€¢ DIM_TIEMPO<br/>â€¢ DIM_PRODUCTO<br/>â€¢ DIM_ALMACEN"]
            DM2_FACT["ğŸ“ˆ FACT_INVENTARIO<br/>MÃ©tricas: stock, entradas,<br/>salidas, valores, estados"]
        end

        subgraph DM3["ğŸšš DATAMART DISTRIBUCIÃ“N"]
            DM3_DB["ğŸ“Š datamart_distribucion.db"]
            DM3_DIM["ğŸ”¹ Dimensiones:<br/>â€¢ DIM_TIEMPO_SALIDA<br/>â€¢ DIM_TIEMPO_LLEGADA<br/>â€¢ DIM_RUTA<br/>â€¢ DIM_ESTADO_ENVIO"]
            DM3_FACT["ğŸ“ˆ FACT_DISTRIBUCION<br/>MÃ©tricas: costos transporte,<br/>dÃ­as trÃ¡nsito, eficiencia"]
        end

        subgraph DM4["ğŸ­ DATAMART PRODUCCIÃ“N"]
            DM4_DB["ğŸ“Š datamart_produccion.db"]
            DM4_DIM["ğŸ”¹ Dimensiones:<br/>â€¢ DIM_TIEMPO<br/>â€¢ DIM_LINEA_PRODUCCION<br/>â€¢ DIM_TURNO"]
            DM4_FACT["ğŸ“ˆ FACT_PRODUCCION<br/>MÃ©tricas: eficiencia,<br/>costos, calidad, merma"]
        end
    end

    %% DimensiÃ³n ComÃºn
    subgraph COMUN["ğŸ•’ DIMENSIÃ“N COMÃšN"]
        DIM_TIEMPO["ğŸ“… DIM_TIEMPO<br/>2023-2026<br/>1,461 registros<br/>JerarquÃ­as temporales"]
    end

    %% Herramientas de BI
    subgraph BI_TOOLS["ğŸ“Š HERRAMIENTAS DE BI"]
        POWERBI["ğŸ”· Power BI"]
        TABLEAU["ğŸ”¶ Tableau"]
        QLIK["ğŸ”¸ Qlik Sense"]
        EXCEL["ğŸ“Š Excel"]
    end

    %% AnÃ¡lisis de Negocio
    subgraph ANALISIS["ğŸ“ˆ ANÃLISIS DE NEGOCIO"]
        A1["ğŸ’¹ AnÃ¡lisis de Ventas<br/>â€¢ Rentabilidad<br/>â€¢ Tendencias<br/>â€¢ SegmentaciÃ³n"]
        A2["ğŸ“‹ Control de Inventarios<br/>â€¢ RotaciÃ³n<br/>â€¢ Stock Ã³ptimo<br/>â€¢ Alertas"]
        A3["ğŸš› OptimizaciÃ³n LogÃ­stica<br/>â€¢ Rutas eficientes<br/>â€¢ Costos transporte<br/>â€¢ Tiempos entrega"]
        A4["âš™ï¸ Eficiencia Productiva<br/>â€¢ KPIs producciÃ³n<br/>â€¢ Control calidad<br/>â€¢ Costos operativos"]
    end

    %% Conexiones del flujo
    CSV1 --> ETL1
    CSV2 --> ETL1
    CSV3 --> ETL1
    CSV4 --> ETL1
    CSV5 --> ETL1

    ETL1 --> SCRIPT1
    SCRIPT1 --> TRANS1
    TRANS1 --> DB

    DB --> T1
    DB --> T2
    DB --> T3
    DB --> T4
    DB --> T5
    DB --> T6
    DB --> T7
    DB --> T8

    DB --> ETL2
    ETL2 --> SCRIPT2
    SCRIPT2 --> TRANS2

    TRANS2 --> DM1_DB
    TRANS2 --> DM2_DB
    TRANS2 --> DM3_DB
    TRANS2 --> DM4_DB

    %% Conexiones de dimensiÃ³n comÃºn
    DIM_TIEMPO -.-> DM1_DIM
    DIM_TIEMPO -.-> DM2_DIM
    DIM_TIEMPO -.-> DM3_DIM
    DIM_TIEMPO -.-> DM4_DIM

    %% Conexiones internas de datamarts
    DM1_DIM --> DM1_FACT
    DM2_DIM --> DM2_FACT
    DM3_DIM --> DM3_FACT
    DM4_DIM --> DM4_FACT

    %% Conexiones a herramientas BI
    DM1_DB --> BI_TOOLS
    DM2_DB --> BI_TOOLS
    DM3_DB --> BI_TOOLS
    DM4_DB --> BI_TOOLS

    %% Conexiones a anÃ¡lisis
    DM1_FACT --> A1
    DM2_FACT --> A2
    DM3_FACT --> A3
    DM4_FACT --> A4

    %% Estilos
    classDef csvStyle fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000
    classDef etlStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef dbStyle fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef dmStyle fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef biStyle fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    classDef analysisStyle fill:#f1f8e9,stroke:#689f38,stroke-width:2px,color:#000

    %% Aplicar estilos
    class CSV1,CSV2,CSV3,CSV4,CSV5 csvStyle
    class SCRIPT1,SCRIPT2,TRANS1,TRANS2 etlStyle
    class DB,T1,T2,T3,T4,T5,T6,T7,T8 dbStyle
    class DM1_DB,DM2_DB,DM3_DB,DM4_DB,DM1_DIM,DM2_DIM,DM3_DIM,DM4_DIM,DM1_FACT,DM2_FACT,DM3_FACT,DM4_FACT,DIM_TIEMPO dmStyle
    class POWERBI,TABLEAU,QLIK,EXCEL biStyle
    class A1,A2,A3,A4 analysisStyle
